### Pristine Agent

The Pristine Agent is an AI-powered GitHub issue management agent designed to assist with maintaining the health and documentation of a code repository. It continuously monitors a specified GitHub repository for new activities and leverages a Large Language Model (LLM) to intelligently decide on and execute actions related to issue management.

**Main Functions:**

*   **Issue Detection & Creation:** Identifies and creates new GitHub issues for:
    *   Missing, outdated, or incomplete documentation.
    *   Bugs or logic flaws in the codebase.
    *   Missing unit tests for functions or modules.
*   **Issue Management:**
    *   Responds to human comments on issues.
    *   Maps TODOs found in code to new or existing issues.
    *   Closes issues once they are resolved.
    *   Prioritizes issues using labels (`p0`, `p1`, `p2`).
    *   Manages issue labels (adding/removing).
    *   Edits issue titles and bodies.
*   **Repository Interaction:** Clones and pulls the target GitHub repository, lists files, reads file content, and executes shell commands within the repository's context.
*   **Contextual Memory:** Stores and retrieves key-value pairs in its internal memory to maintain continuity and context across operations.
*   **LLM Integration:** Utilizes an external Large Language Model for "thinking" processes, generating natural language thoughts, and deciding on a sequence of actions.
*   **Monitoring Dashboard:** Provides a web-based dashboard to visualize a history of executed actions and LLM calls, aiding in transparency and debugging.

**Inputs:**

*   **Environment Variables:**
    *   `GITHUB_PERSONAL_ACCESS_TOKEN`: Required for GitHub API authentication.
    *   `OPENAI_API_KEY` (or `OPENAI_KEY`): Required for OpenAI LLM API authentication.
    *   `OPENAI_API_BASE`: Optional, defaults to `https://api.openai.com`.
    *   `OPENAI_API_MODEL`: Optional, defaults to `gpt-3.5-turbo`.
    *   `GITHUB_REPOSITORY_OWNER`: Required, the owner of the target GitHub repository.
    *   `GITHUB_REPOSITORY_NAME`: Required, the name of the target GitHub repository.
    *   `GITHUB_REPOSITORY_ISSUES_BRANCH`: Optional, the branch where issues are managed, defaults to `issues`.
*   **GitHub Events:** New commits, new issues, updates to existing issues (e.g., new comments, body/title changes).
*   **User Prompts (via LLM):** Internal prompts generated by the agent's context for LLM inference.

**Outputs:**

*   **GitHub API (HTTP):** Creates, retrieves, updates (labels, body, title), comments on, and closes issues.
*   **Local File System:** Clones and manages a local copy of the GitHub repository.
*   **Shell (stdout/stderr):** Executes commands and captures their output.
*   **LLM (HTTP):** Sends prompts to and receives responses from the configured LLM.
*   **Web Dashboard (HTTP on port 5005):** Displays logs of agent actions and LLM calls for monitoring.
*   **Standard Output (stdout):** Provides real-time logs of the agent's operations, thoughts, and action outputs.